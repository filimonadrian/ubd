SQL> set lines 200
SQL> set pages 100
SQL> 
SQL> select to_char(sysdate, 'dd-mm-yyyy hh:mi:ss') from dual;

TO_CHAR(SYSDATE,'DD                                                                                                                                                                                     
-------------------                                                                                                                                                                                     
15-12-2021 12:16:28                                                                                                                                                                                     

SQL> 
SQL> --- incepe sesiune
SQL> insert into login_lab_ubd values( 'Filimon Adrian', '342C2', 'Lab10', user, sysdate, null, null);

1 row created.

SQL> 
SQL> 
SQL> -- 1) Crearea unui index de tip B-Tree:
SQL> 
SQL> create index abd1.emp_name_idx
  2  on abd1.emp(ename)
  3      pctfree 30
  4      storage(initial 200k next 200k
  5      pctincrease 0 maxextents 50)
  6      tablespace bd_data;
on abd1.emp(ename)
            *
ERROR at line 2:
ORA-01408: such column list already indexed 


SQL> -- 2) Crearea unui index de tip BITMAP:
SQL> create bitmap index abd1.dept_name_idx
  2  on
  3      abd1.dept(dname)
  4      pctfree 30
  5      storage(initial 200k next 200k
  6      pctincrease 0 maxextents 50)
  7      tablespace bd_data;
    abd1.dept(dname)
              *
ERROR at line 3:
ORA-01408: such column list already indexed 


SQL> -- 3) Alocarea unei extensii pentru un index de tip B-Tree:
SQL> alter tablespace users add datafile 'd:/index01.dbf' size 10M;

Tablespace altered.

SQL> alter index emp_name_idx allocate extent (size 200k datafile 'd:/index01.dbf')
  2  
SQL> ;
  1* alter index emp_name_idx allocate extent (size 200k datafile 'd:/index01.dbf')
SQL> 
SQL> 
SQL> 
SQL> 
SQL> -- Obs. Dupa ce se aloca o extensie unui index fisierul respectiv nu se poate sterge.
SQL> -- Trebuie sters mai intai indexul.
SQL> alter tablespace users drop datafile 'd:/index01.dbf';

Tablespace altered.

SQL> -- 4) Eliberarea spatiului neutilizat pentru un index de tip B-Tree:
SQL> alter index emp_name_idx deallocate unused;
alter index emp_name_idx deallocate unused
*
ERROR at line 1:
ORA-01418: specified index does not exist 


SQL> 
SQL> alter index emp_name_idx allocate extent (size 200k datafile 'd:/index01.dbf');
alter index emp_name_idx allocate extent (size 200k datafile 'd:/index01.dbf')
*
ERROR at line 1:
ORA-01418: specified index does not exist 


SQL> 
SQL> 
SQL> 
SQL> 
SQL> create index abd1.emp_name_idx
  2  on abd1.emp(ename)
  3      pctfree 30
  4      storage(initial 200k next 200k
  5      pctincrease 0 maxextents 50)
  6      tablespace bd_data;
on abd1.emp(ename)
            *
ERROR at line 2:
ORA-01408: such column list already indexed 


SQL> 
SQL> select * from bd_data;
select * from bd_data
              *
ERROR at line 1:
ORA-00942: table or view does not exist 


SQL> select * from ubd_data;
select * from ubd_data
              *
ERROR at line 1:
ORA-00942: table or view does not exist 


SQL> select * from emp;

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM     DEPTNO                                                                                                                   
---------- ---------- --------- ---------- --------- ---------- ---------- ----------                                                                                                                   
       999 TEST       TRANZACT        1111 17-NOV-21        100          0         10                                                                                                                   
      9999 TEST1      TRANZACT        1111 24-NOV-21        100          0         10                                                                                                                   
      7369 SMITH      CLERK           7902 17-DEC-80        800                    20                                                                                                                   
      7499 ALLEN      SALESMAN        7698 20-FEB-81       1600        300         30                                                                                                                   
      7521 WARD       SALESMAN        7698 22-FEB-81       1250        500         30                                                                                                                   
      7566 JONES      MANAGER         7839 02-APR-81       2975                    20                                                                                                                   
      7654 MARTIN     SALESMAN        7698 28-SEP-81       1250       1400         30                                                                                                                   
      7698 BLAKE      MANAGER         7839 01-MAY-81       2850                    30                                                                                                                   
      7782 CLARK      MANAGER         7839 09-JUN-81       2450                    10                                                                                                                   
      7788 SCOTT      ANALYST         7566 19-APR-87       3000                    20                                                                                                                   
      7839 KING       PRESIDENT            17-NOV-81       5000                    10                                                                                                                   
      7844 TURNER     SALESMAN        7698 08-SEP-81       1500          0         30                                                                                                                   
      7876 ADAMS      CLERK           7788 23-MAY-87       1100                    20                                                                                                                   
      7900 JAMES      CLERK           7698 03-DEC-81        950                    30                                                                                                                   
      7902 FORD       ANALYST         7566 03-DEC-81       3000                    20                                                                                                                   
      7934 MILLER     CLERK           7782 23-JAN-82       1300                    10                                                                                                                   

16 rows selected.

SQL> 
SQL> 
SQL> create index abd1.emp_name_idx
  2  on abd1.emp(empno)
  3      pctfree 30
  4      storage(initial 200k next 200k
  5      pctincrease 0 maxextents 50)
  6      tablespace bd_data;
on abd1.emp(empno)
            *
ERROR at line 2:
ORA-01408: such column list already indexed 


SQL> 
SQL> 
SQL> 
SQL> create index abd1.emp_name_idx
  2  on abd1.emp(JOB)
  3      pctfree 30
  4      storage(initial 200k next 200k
  5      pctincrease 0 maxextents 50)
  6      tablespace bd_data;

Index created.

SQL> -- 2) Crearea unui index de tip BITMAP:
SQL> create bitmap index abd1.dept_name_idx
  2  on
  3      abd1.dept(dname)
  4      pctfree 30
  5      storage(initial 200k next 200k
  6      pctincrease 0 maxextents 50)
  7      tablespace bd_data;
    abd1.dept(dname)
              *
ERROR at line 3:
ORA-01408: such column list already indexed 


SQL> select * from dept;

    DEPTNO DNAME          LOC                                                                                                                                                                           
---------- -------------- -------------                                                                                                                                                                 
        50 TEST           BUCHAREST                                                                                                                                                                     
        10 ACCOUNTING     NEW YORK                                                                                                                                                                      
        20 RESEARCH       DALLAS                                                                                                                                                                        
        30 SALES          CHICAGO                                                                                                                                                                       
        40 OPERATIONS     BOSTON                                                                                                                                                                        

SQL> alter tablespace users add datafile 'd:/index01.dbf' size 10M;

Tablespace altered.

SQL> alter index emp_name_idx allocate extent (size 200k datafile 'd:/index01.dbf');
alter index emp_name_idx allocate extent (size 200k datafile 'd:/index01.dbf')
*
ERROR at line 1:
ORA-03284: datafile or tempfile d:/index01.dbf is not a member of tablespace BD_DATA 


SQL> alter tablespace users drop datafile 'd:/index01.dbf';

Tablespace altered.

SQL> alter index emp_name_idx deallocate unused;

Index altered.

SQL> alter index emp_name_idx rebuild tablespace system;

Index altered.

SQL> -- 6) Defragmentarea blocurilor unui index:
SQL> alter index emp_name_idx coalesce;

Index altered.

SQL> -- 7) Informatii din dictionar despre indecsi:
SQL> desc dba_indexes
 Name                                                                                                              Null?    Type
 ----------------------------------------------------------------------------------------------------------------- -------- ----------------------------------------------------------------------------
 OWNER                                                                                                             NOT NULL VARCHAR2(128)
 INDEX_NAME                                                                                                        NOT NULL VARCHAR2(128)
 INDEX_TYPE                                                                                                                 VARCHAR2(27)
 TABLE_OWNER                                                                                                       NOT NULL VARCHAR2(128)
 TABLE_NAME                                                                                                        NOT NULL VARCHAR2(128)
 TABLE_TYPE                                                                                                                 VARCHAR2(11)
 UNIQUENESS                                                                                                                 VARCHAR2(9)
 COMPRESSION                                                                                                                VARCHAR2(13)
 PREFIX_LENGTH                                                                                                              NUMBER
 TABLESPACE_NAME                                                                                                            VARCHAR2(30)
 INI_TRANS                                                                                                                  NUMBER
 MAX_TRANS                                                                                                                  NUMBER
 INITIAL_EXTENT                                                                                                             NUMBER
 NEXT_EXTENT                                                                                                                NUMBER
 MIN_EXTENTS                                                                                                                NUMBER
 MAX_EXTENTS                                                                                                                NUMBER
 PCT_INCREASE                                                                                                               NUMBER
 PCT_THRESHOLD                                                                                                              NUMBER
 INCLUDE_COLUMN                                                                                                             NUMBER
 FREELISTS                                                                                                                  NUMBER
 FREELIST_GROUPS                                                                                                            NUMBER
 PCT_FREE                                                                                                                   NUMBER
 LOGGING                                                                                                                    VARCHAR2(3)
 BLEVEL                                                                                                                     NUMBER
 LEAF_BLOCKS                                                                                                                NUMBER
 DISTINCT_KEYS                                                                                                              NUMBER
 AVG_LEAF_BLOCKS_PER_KEY                                                                                                    NUMBER
 AVG_DATA_BLOCKS_PER_KEY                                                                                                    NUMBER
 CLUSTERING_FACTOR                                                                                                          NUMBER
 STATUS                                                                                                                     VARCHAR2(8)
 NUM_ROWS                                                                                                                   NUMBER
 SAMPLE_SIZE                                                                                                                NUMBER
 LAST_ANALYZED                                                                                                              DATE
 DEGREE                                                                                                                     VARCHAR2(40)
 INSTANCES                                                                                                                  VARCHAR2(40)
 PARTITIONED                                                                                                                VARCHAR2(3)
 TEMPORARY                                                                                                                  VARCHAR2(1)
 GENERATED                                                                                                                  VARCHAR2(1)
 SECONDARY                                                                                                                  VARCHAR2(1)
 BUFFER_POOL                                                                                                                VARCHAR2(7)
 FLASH_CACHE                                                                                                                VARCHAR2(7)
 CELL_FLASH_CACHE                                                                                                           VARCHAR2(7)
 USER_STATS                                                                                                                 VARCHAR2(3)
 DURATION                                                                                                                   VARCHAR2(15)
 PCT_DIRECT_ACCESS                                                                                                          NUMBER
 ITYP_OWNER                                                                                                                 VARCHAR2(128)
 ITYP_NAME                                                                                                                  VARCHAR2(128)
 PARAMETERS                                                                                                                 VARCHAR2(1000)
 GLOBAL_STATS                                                                                                               VARCHAR2(3)
 DOMIDX_STATUS                                                                                                              VARCHAR2(12)
 DOMIDX_OPSTATUS                                                                                                            VARCHAR2(6)
 FUNCIDX_STATUS                                                                                                             VARCHAR2(8)
 JOIN_INDEX                                                                                                                 VARCHAR2(3)
 IOT_REDUNDANT_PKEY_ELIM                                                                                                    VARCHAR2(3)
 DROPPED                                                                                                                    VARCHAR2(3)
 VISIBILITY                                                                                                                 VARCHAR2(9)
 DOMIDX_MANAGEMENT                                                                                                          VARCHAR2(14)
 SEGMENT_CREATED                                                                                                            VARCHAR2(3)
 ORPHANED_ENTRIES                                                                                                           VARCHAR2(3)
 INDEXING                                                                                                                   VARCHAR2(7)
 AUTO                                                                                                                       VARCHAR2(3)
 CONSTRAINT_INDEX                                                                                                           VARCHAR2(3)

SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> select index_name, index_type, table_name, status from dba_indexes where owner='ABD1';

INDEX_NAME                                                                                                                       INDEX_TYPE                                                             
-------------------------------------------------------------------------------------------------------------------------------- ---------------------------                                            
TABLE_NAME                                                                                                                       STATUS                                                                 
-------------------------------------------------------------------------------------------------------------------------------- --------                                                               
PK_DEPT                                                                                                                          NORMAL                                                                 
DEPT                                                                                                                             VALID                                                                  
                                                                                                                                                                                                        
PK_EMP                                                                                                                           NORMAL                                                                 
EMP                                                                                                                              VALID                                                                  
                                                                                                                                                                                                        
UNIQUE_DNAME                                                                                                                     NORMAL                                                                 
DEPT                                                                                                                             VALID                                                                  
                                                                                                                                                                                                        
INDEX_EMP                                                                                                                        NORMAL                                                                 
EMP                                                                                                                              VALID                                                                  
                                                                                                                                                                                                        
EMP_NAME_IDX                                                                                                                     NORMAL                                                                 
EMP                                                                                                                              VALID                                                                  
                                                                                                                                                                                                        

SQL> -- 8) Informatii din dictionar despre coloanele indecsilor:
SQL> desc dba_ind_columns
 Name                                                                                                              Null?    Type
 ----------------------------------------------------------------------------------------------------------------- -------- ----------------------------------------------------------------------------
 INDEX_OWNER                                                                                                       NOT NULL VARCHAR2(128)
 INDEX_NAME                                                                                                        NOT NULL VARCHAR2(128)
 TABLE_OWNER                                                                                                       NOT NULL VARCHAR2(128)
 TABLE_NAME                                                                                                        NOT NULL VARCHAR2(128)
 COLUMN_NAME                                                                                                                VARCHAR2(4000)
 COLUMN_POSITION                                                                                                   NOT NULL NUMBER
 COLUMN_LENGTH                                                                                                     NOT NULL NUMBER
 CHAR_LENGTH                                                                                                                NUMBER
 DESCEND                                                                                                                    VARCHAR2(4)
 COLLATED_COLUMN_ID                                                                                                         NUMBER

SQL> column name format a30
SQL> desc dba_ind_columns
 Name                                                                                                              Null?    Type
 ----------------------------------------------------------------------------------------------------------------- -------- ----------------------------------------------------------------------------
 INDEX_OWNER                                                                                                       NOT NULL VARCHAR2(128)
 INDEX_NAME                                                                                                        NOT NULL VARCHAR2(128)
 TABLE_OWNER                                                                                                       NOT NULL VARCHAR2(128)
 TABLE_NAME                                                                                                        NOT NULL VARCHAR2(128)
 COLUMN_NAME                                                                                                                VARCHAR2(4000)
 COLUMN_POSITION                                                                                                   NOT NULL NUMBER
 COLUMN_LENGTH                                                                                                     NOT NULL NUMBER
 CHAR_LENGTH                                                                                                                NUMBER
 DESCEND                                                                                                                    VARCHAR2(4)
 COLLATED_COLUMN_ID                                                                                                         NUMBER

SQL> desc dba_ind_columns
 Name                                                                                                              Null?    Type
 ----------------------------------------------------------------------------------------------------------------- -------- ----------------------------------------------------------------------------
 INDEX_OWNER                                                                                                       NOT NULL VARCHAR2(128)
 INDEX_NAME                                                                                                        NOT NULL VARCHAR2(128)
 TABLE_OWNER                                                                                                       NOT NULL VARCHAR2(128)
 TABLE_NAME                                                                                                        NOT NULL VARCHAR2(128)
 COLUMN_NAME                                                                                                                VARCHAR2(4000)
 COLUMN_POSITION                                                                                                   NOT NULL NUMBER
 COLUMN_LENGTH                                                                                                     NOT NULL NUMBER
 CHAR_LENGTH                                                                                                                NUMBER
 DESCEND                                                                                                                    VARCHAR2(4)
 COLLATED_COLUMN_ID                                                                                                         NUMBER

SQL> 
SQL> 
SQL> 
SQL> 
SQL> select index_name, table_owner, table_name, column_name
  2  from dba_ind_columns
  3  where index_owner='ABD1';

INDEX_NAME                                                                                                                                                                                              
--------------------------------------------------------------------------------------------------------------------------------                                                                        
TABLE_OWNER                                                                                                                                                                                             
--------------------------------------------------------------------------------------------------------------------------------                                                                        
TABLE_NAME                                                                                                                                                                                              
--------------------------------------------------------------------------------------------------------------------------------                                                                        
COLUMN_NAME                                                                                                                                                                                             
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
EMP_NAME_IDX                                                                                                                                                                                            
ABD1                                                                                                                                                                                                    
EMP                                                                                                                                                                                                     
JOB                                                                                                                                                                                                     
                                                                                                                                                                                                        
INDEX_EMP                                                                                                                                                                                               
ABD1                                                                                                                                                                                                    
EMP                                                                                                                                                                                                     
ENAME                                                                                                                                                                                                   
                                                                                                                                                                                                        
PK_DEPT                                                                                                                                                                                                 
ABD1                                                                                                                                                                                                    
DEPT                                                                                                                                                                                                    
DEPTNO                                                                                                                                                                                                  
                                                                                                                                                                                                        
PK_EMP                                                                                                                                                                                                  
ABD1                                                                                                                                                                                                    
EMP                                                                                                                                                                                                     
EMPNO                                                                                                                                                                                                   
                                                                                                                                                                                                        
UNIQUE_DNAME                                                                                                                                                                                            
ABD1                                                                                                                                                                                                    
DEPT                                                                                                                                                                                                    
DNAME                                                                                                                                                                                                   
                                                                                                                                                                                                        

SQL> column index_name format a30
SQL> column table_owner format a30
SQL> column table_name format a30
SQL> column column_name format a30
SQL> select index_name, table_owner, table_name, column_name
  2  
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> select index_name, table_owner, table_name, column_name
  2  from dba_ind_columns
  3  where index_owner='ABD1';

INDEX_NAME                     TABLE_OWNER                    TABLE_NAME                     COLUMN_NAME                                                                                                
------------------------------ ------------------------------ ------------------------------ ------------------------------                                                                             
EMP_NAME_IDX                   ABD1                           EMP                            JOB                                                                                                        
INDEX_EMP                      ABD1                           EMP                            ENAME                                                                                                      
PK_DEPT                        ABD1                           DEPT                           DEPTNO                                                                                                     
PK_EMP                         ABD1                           EMP                            EMPNO                                                                                                      
UNIQUE_DNAME                   ABD1                           DEPT                           DNAME                                                                                                      

SQL> -- 9) Startarea si stoparea monitorizarii unui index:
SQL> alter index emp_name_idx monitoring usage;

Index altered.

SQL> -- 10) Informatii din dictionar despre indecsii monitorizati:
SQL> desc v$object_usage
 Name                                                                                                              Null?    Type
 ----------------------------------------------------------------------------------------------------------------- -------- ----------------------------------------------------------------------------
 INDEX_NAME                                                                                                        NOT NULL VARCHAR2(128)
 TABLE_NAME                                                                                                        NOT NULL VARCHAR2(128)
 MONITORING                                                                                                                 VARCHAR2(3)
 USED                                                                                                                       VARCHAR2(3)
 START_MONITORING                                                                                                           VARCHAR2(19)
 END_MONITORING                                                                                                             VARCHAR2(19)

SQL> select * from v$object_usage;

INDEX_NAME                     TABLE_NAME                     MON USE START_MONITORING    END_MONITORING                                                                                                
------------------------------ ------------------------------ --- --- ------------------- -------------------                                                                                           
EMP_NAME_IDX                   EMP                            YES NO  12/15/2021 12:39:09                                                                                                               

SQL> 
SQL> -- 11) Startarea analizei structurii unui index (se populeaza view-ul INDEX_STATS cu
SQL> --  informatii despre index):
SQL> analyze index emp_name_idx validate structure;

Index analyzed.

SQL> desc index_stats
 Name                                                                                                              Null?    Type
 ----------------------------------------------------------------------------------------------------------------- -------- ----------------------------------------------------------------------------
 HEIGHT                                                                                                                     NUMBER
 BLOCKS                                                                                                                     NUMBER
 NAME                                                                                                                       VARCHAR2(128)
 PARTITION_NAME                                                                                                             VARCHAR2(128)
 LF_ROWS                                                                                                                    NUMBER
 LF_BLKS                                                                                                                    NUMBER
 LF_ROWS_LEN                                                                                                                NUMBER
 LF_BLK_LEN                                                                                                                 NUMBER
 BR_ROWS                                                                                                                    NUMBER
 BR_BLKS                                                                                                                    NUMBER
 BR_ROWS_LEN                                                                                                                NUMBER
 BR_BLK_LEN                                                                                                                 NUMBER
 DEL_LF_ROWS                                                                                                                NUMBER
 DEL_LF_ROWS_LEN                                                                                                            NUMBER
 DISTINCT_KEYS                                                                                                              NUMBER
 MOST_REPEATED_KEY                                                                                                          NUMBER
 BTREE_SPACE                                                                                                                NUMBER
 USED_SPACE                                                                                                                 NUMBER
 PCT_USED                                                                                                                   NUMBER
 ROWS_PER_KEY                                                                                                               NUMBER
 BLKS_GETS_PER_ACCESS                                                                                                       NUMBER
 PRE_ROWS                                                                                                                   NUMBER
 PRE_ROWS_LEN                                                                                                               NUMBER
 OPT_CMPR_COUNT                                                                                                             NUMBER
 OPT_CMPR_PCTSAVE                                                                                                           NUMBER
 DEL_LF_CMP_ROWS                                                                                                            NUMBER
 PRG_LF_CMP_ROWS                                                                                                            NUMBER
 LF_CMP_ROWS                                                                                                                NUMBER
 LF_CMP_ROWS_LEN                                                                                                            NUMBER
 LF_UNCMP_ROWS                                                                                                              NUMBER
 LF_UNCMP_ROWS_LEN                                                                                                          NUMBER
 LF_SUF_ROWS_LEN                                                                                                            NUMBER
 LF_CMP_ROWS_UNCMP_LEN                                                                                                      NUMBER
 LF_CMP_RECMP_COUNT                                                                                                         NUMBER
 LF_CMP_LOCK_VEC_LEN                                                                                                        NUMBER
 LF_CMP_BLKS                                                                                                                NUMBER
 LF_UNCMP_BLKS                                                                                                              NUMBER

SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> select name, blocks, used_space, pct_used, distinct_keys, lf_rows, del_lf_rows
  2  from index_stats;

NAME                               BLOCKS USED_SPACE   PCT_USED DISTINCT_KEYS    LF_ROWS DEL_LF_ROWS                                                                                                    
------------------------------ ---------- ---------- ---------- ------------- ---------- -----------                                                                                                    
EMP_NAME_IDX                           32        304          4             6         16           0                                                                                                    

SQL> 
SQL> 
SQL> 
SQL> -- 13) Stergerea unui index din dictionar:
SQL> drop index emp_name_idx;

Index dropped.

SQL> 
SQL> 
SQL> 
SQL> 
SQL> -- 1) Sa se creeze o copie a tabelei EMP apoi sa se creeze un index pe coloanele deptno si empno
SQL> -- din tabela copie. Verificati in dictionar componenta indexului.
SQL> 
SQL> CREATE TABLE emp_copie AS SELECT * FROM EMP;

Table created.

SQL> select * from emp_copie;

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM     DEPTNO                                                                                                                   
---------- ---------- --------- ---------- --------- ---------- ---------- ----------                                                                                                                   
       999 TEST       TRANZACT        1111 17-NOV-21        100          0         10                                                                                                                   
      9999 TEST1      TRANZACT        1111 24-NOV-21        100          0         10                                                                                                                   
      7369 SMITH      CLERK           7902 17-DEC-80        800                    20                                                                                                                   
      7499 ALLEN      SALESMAN        7698 20-FEB-81       1600        300         30                                                                                                                   
      7521 WARD       SALESMAN        7698 22-FEB-81       1250        500         30                                                                                                                   
      7566 JONES      MANAGER         7839 02-APR-81       2975                    20                                                                                                                   
      7654 MARTIN     SALESMAN        7698 28-SEP-81       1250       1400         30                                                                                                                   
      7698 BLAKE      MANAGER         7839 01-MAY-81       2850                    30                                                                                                                   
      7782 CLARK      MANAGER         7839 09-JUN-81       2450                    10                                                                                                                   
      7788 SCOTT      ANALYST         7566 19-APR-87       3000                    20                                                                                                                   
      7839 KING       PRESIDENT            17-NOV-81       5000                    10                                                                                                                   
      7844 TURNER     SALESMAN        7698 08-SEP-81       1500          0         30                                                                                                                   
      7876 ADAMS      CLERK           7788 23-MAY-87       1100                    20                                                                                                                   
      7900 JAMES      CLERK           7698 03-DEC-81        950                    30                                                                                                                   
      7902 FORD       ANALYST         7566 03-DEC-81       3000                    20                                                                                                                   
      7934 MILLER     CLERK           7782 23-JAN-82       1300                    10                                                                                                                   

16 rows selected.

SQL> CREATE INDEX deptno_emp_copie_i
  2  ON emp_copie(deptno);

Index created.

SQL> CREATE INDEX empno_emp_copie_i
  2  ON emp_copie(empno);

Index created.

SQL> SELECT
  2      index_name,
  3      index_type,
  4      visibility,
  5      status
  6  FROM
  7      all_indexes
  8  WHERE
  9      table_name = 'emp_copie';

no rows selected

SQL> SELECT
  2      index_name,
  3      index_type,
  4      visibility,
  5      status
  6  FROM
  7      all_indexes
  8  WHERE
  9      table_name = 'EMP_COPIE';

INDEX_NAME                     INDEX_TYPE                  VISIBILIT STATUS                                                                                                                             
------------------------------ --------------------------- --------- --------                                                                                                                           
DEPTNO_EMP_COPIE_I             NORMAL                      VISIBLE   VALID                                                                                                                              
EMPNO_EMP_COPIE_I              NORMAL                      VISIBLE   VALID                                                                                                                              

SQL> 
SQL> 
SQL> -- 2) Sa se creeze un nou fisier de date cu dimensiunea de 1MB. In acest fisier sa se faca o extensie
SQL> -- de 100K pentru indexul creat.
SQL> 
SQL> alter tablespace BD_DATA
  2  add datafile 'D:/index03.dbf' size 1M;

Tablespace altered.

SQL> alter index deptno_emp_copie_i allocate extent (size 100k datafile 'D:/index03.dbf');

Index altered.

SQL> -- 3) Verificati in dictionar numarul de blocuri alocate indexului si care este procentul utilizat din
SQL> -- spatiul alocat.
SQL> 
SQL> SELECT LEAF_BLOCKS, SAMPLE_SIZE FROM ALL_INDEXES WHERE INDEX_NAME = 'DEPTNO_EMP_COPIE_I';

LEAF_BLOCKS SAMPLE_SIZE                                                                                                                                                                                 
----------- -----------                                                                                                                                                                                 
          1          16                                                                                                                                                                                 

SQL> select name, blocks, (used_space/btree_space)*100 percent_used from index_stats where name='EMP_COPY_IDX';

no rows selected

SQL> 
SQL> 
SQL> 
SQL> 
SQL> select name, blocks, (used_space/btree_space)*100 percent_used from index_stats;

no rows selected

SQL> select * from index_stats;

no rows selected

SQL> select name, blocks, (used_space/btree_space)*100 percent_used from index_stats where name='DEPTNO_EMP_COPIE_I';

no rows selected

SQL> -- 4) Faceti o lista cu numele instantei curente, numele indecsilor si tabelele aferente.
SQL> 
SQL> 
SQL> select b.instance_name, c.index_name, a.table_name
  2  from user_tables a, v$instance b, dba_ind_columns c
  3  where b.instance_number = a.instances and a.table_name = c.table_name;

INSTANCE_NAME    INDEX_NAME                     TABLE_NAME                                                                                                                                              
---------------- ------------------------------ ------------------------------                                                                                                                          
orcl             DEPTNO_EMP_COPIE_I             EMP_COPIE                                                                                                                                               
orcl             EMPNO_EMP_COPIE_I              EMP_COPIE                                                                                                                                               
orcl             INDEX_EMP                      EMP                                                                                                                                                     
orcl             PK_DEPT                        DEPT                                                                                                                                                    
orcl             PK_EMP                         EMP                                                                                                                                                     
orcl             UNIQUE_DNAME                   DEPT                                                                                                                                                    

6 rows selected.

SQL> 
SQL> alter index deptno_emp_copie_i monitoring usage;

Index altered.

SQL> select start_monitoring from v$object_usage where index_name = 'DEPTNO_EMP_COPIE_I';

START_MONITORING                                                                                                                                                                                        
-------------------                                                                                                                                                                                     
12/15/2021 13:02:49                                                                                                                                                                                     

SQL> -- 5) Monitorizati indexul creat si verificati in dictionar data si ora cand a inceput monitorizarea
SQL> select start_monitoring from v$object_usage where index_name = 'DEPTNO_EMP_COPIE_I';

START_MONITORING                                                                                                                                                                                        
-------------------                                                                                                                                                                                     
12/15/2021 13:02:49                                                                                                                                                                                     

SQL> -- sfarsit de laborator
SQL> 
SQL> update login_lab_ubd set data_sf= sysdate where laborator='Lab10';

1 row updated.

SQL> update login_lab_ubd set durata= round((data_sf-data_in)*24*60) where laborator='Lab10';

1 row updated.

SQL> commit;

Commit complete.

SQL> select instance_number,instance_name, to_char(startup_time, 'dd-mm-yyyy hh:mi:ss'), host_name from v$instance;

INSTANCE_NUMBER INSTANCE_NAME    TO_CHAR(STARTUP_TIM HOST_NAME                                                                                                                                          
--------------- ---------------- ------------------- ----------------------------------------------------------------                                                                                   
              1 orcl             15-12-2021 09:43:30 DESKTOP-04HOUK7                                                                                                                                    

SQL> select nume_stud, grupa, laborator, to_char(data_in, 'dd-mm-yyyy hh:mi:ss') data_inceput,
  2  to_char(data_sf, 'dd-mm-yyyy hh:mi:ss') data_sfarsit, durata minute_lucrate from login_lab_ubd;

NUME_STUD                      GRUPA      LABORATOR  DATA_INCEPUT        DATA_SFARSIT        MINUTE_LUCRATE                                                                                             
------------------------------ ---------- ---------- ------------------- ------------------- --------------                                                                                             
Filimon Adrian                 342C2      Lab10      15-12-2021 12:16:28 15-12-2021 01:17:40             61                                                                                             
Filimon Adrian                 342C2      Lab5       03-11-2021 10:08:31 03-11-2021 11:40:32             92                                                                                             
Filimon Adrian                 342C2      Lab6       10-11-2021 08:41:22 10-11-2021 09:52:41             71                                                                                             
Filimon Adrian                 342C2      Lab7       17-11-2021 12:15:38 17-11-2021 02:40:58            145                                                                                             
Filimon Adrian                 342C2      Lab8       24-11-2021 10:08:17 24-11-2021 11:47:54            100                                                                                             
Filimon Adrian                 342C2      Lab4       27-10-2021 07:24:44 27-10-2021 08:34:24             70                                                                                             
Filimon Adrian                 342C2      Lab3       20-10-2021 10:14:01                                                                                                                                
Filimon Adrian                 342C2      Lab9       08-12-2021 12:15:12 08-12-2021 01:45:08             90                                                                                             

8 rows selected.

SQL> 
SQL> spool off;
